
<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../ch-externallibraries/jquerylatest.html">
<link rel="import" href="../ch-externallibraries/jquery-gridster.html">


<dom-module id="ch-gridster">
  <template>


    <div class="gridster">
      <content select="#gridstermain"></content>
    </div>


  </template>


  <script>
    Polymer({
      is: 'ch-gridster',

      properties: {

      },
      attached:function () {


        $(function(){
          var gridster=$(".gridster ul").gridster({
            widget_base_dimensions: [200, 100],
            widget_margins: [2, 2],
            autogrow_cols: true,
            resize: {
              enabled: true,
              max_size: [4, 4],
              min_size: [1, 1]
            },
            draggable: {
              handle: 'header'
            }
          }).data('gridster');

          $(".widget-close").click(function(){
            var id=$(this).attr("panel-close");
            console.log(id);
            gridster.remove_widget($('#'+id));
          });

        });
      },
      removewidget:function (e) {
        var args = e.target.getAttribute('data-args');
        console.log('Ard', args);
        var gridster = $(".gridster ul").gridster().data('gridster');
        gridster.remove_widget($("ul").find("[id='#panel9']"));
      }

    });
  </script>
</dom-module>

<style>
  /*:host {*/
    /*display: block;*/
    /*box-sizing: border-box;*/
  /*}*/


  .gridster * {
    margin:0;
    padding:0;
  }

  .gridster ul {
    list-style-type: none;

  }
  .gridster ul li {
    background-color: white;
    overflow: hidden;
    border: solid 1px lightgrey;
  }

  .gridster ul li:hover {
    border: solid 2px lightblue;
  }

  .gridster li h2{
    width: 100%;
    line-height: 25px;
    font-family: "Open Sans", "Myriad Pro", Arial, sans-serif;
    font-size: 22px;
    padding-bottom: 5px;
    background-color: lightgrey;
    padding-left: 5px;
  }

  .gridster li .panel{
    height: 75%;
    overflow: auto;
    padding: 10px;
    text-align: justify;
    margin-bottom: 20px;
  }

  .gridster li .panel::-webkit-scrollbar {
    width: 1px;
  }


  .gridster li header {
    visibility: hidden;
    width: 100%;
    text-align: center;
    background: transparent;
    display: block;
    font-size: 11px;
    line-height: normal;
    margin-bottom: 0px;
    cursor: move;
    height: 25px;
    position: absolute;
    opacity: 0.5;
  }

  .gridster li header .widget-close {
    padding: 4px 4px 6px ;
    color: #333333;
    cursor: pointer;
    float: right;
    opacity: 0.5;
  }
  .gridster li:hover > header{
    visibility: visible;
  }


  .gridster {
    margin: 0 auto;
    text-align: left;

    opacity: .8;

    -webkit-transition: opacity .6s;
    -moz-transition: opacity .6s;
    -o-transition: opacity .6s;
    -ms-transition: opacity .6s;
    transition: opacity .6s;
  }

  .gridster .gs-w {
    /*background: #DDD;*/
    cursor: pointer;
  }

  .gridster .player {
    background: #BBB;
  }


  .gridster .preview-holder {
    border: none!important;
    background: red!important;
  }


  #scrollView{
    max-width: 100%;
    min-height:100%;
    max-height: 100%;
  }

  #map {
    width: 100%;
    height: 800px;
  }

  table td {
    position:relative;
  }


</style>
